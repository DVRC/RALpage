	file	"X11.c"
	data	1
	even
	global	screen
screen:
	long	0
	lcomm	screen_size,4
	lcomm	transfer,1024
	comm	pixels_per_inch,4
	comm	hppp,4
	comm	vppp,4
	even
	global	single_rop
single_rop:
	long	0
	long	5
	long	10
	long	15
	long	0
	long	5
	long	10
	long	15
	long	0
	long	5
	long	10
	long	15
	long	0
	long	5
	long	10
	long	15
	text
	global	InitTransfer
	set	S%1,0
	set	T%1,0
	set	F%1,-8
	set	FPO%1,4
	set	FPM%1,0x0000
	set	M%1,0x0000
InitTransfer:
	link.l	%fp,&-8
	mov.l	(8,%fp),pixels_per_inch
	clr.l	((S%1-4).w,%fp)
	br.b	L%403
L%%1:
	mov.l	((S%1-4).w,%fp),%d0
	mov.l	%d0,(%d0.l*4,transfer)
	add.l	&1,((S%1-4).w,%fp)
L%403:
	cmp.l	((S%1-4).w,%fp),&256
	blt.b	L%%1
	unlk	%fp
	rts
	data	2
L%407:
	byte	'%,'s,'\n,0x00
	data	1
	lcomm	dpy,4
	lcomm	SCREEN,4
	even
GlobalGC:
	long	0
	even
GlobalMask:
	long	0
	lcomm	fillgc,64
	lcomm	BitmapGC,64
	lcomm	whitegc,4
	text
	global	InitHardware
	set	S%2,0
	set	T%2,0
	set	F%2,-4
	set	FPO%2,4
	set	FPM%2,0x0000
	set	M%2,0x0000
Punt:
	link.l	%fp,&-4
	mov.l	(8,%fp),(%sp)
	mov.l	&L%407,-(%sp)
	mov.l	&_iob+28,-(%sp)
	jsr	fprintf
	add.l	&8,%sp
	mov.l	&1,%d0
	mov.l	%d0,(%sp)
	jsr	exit
	unlk	%fp
	rts
	data	2
L%420:
	byte	0x00
L%422:
	byte	'C,'o,'u,'l,'d,0x20,'n,'o
	byte	't,0x20,'o,'p,'e,'n,0x20,'d
	byte	'i,'s,'p,'l,'a,'y,0x00
	set	S%3,0
	set	T%3,0
	set	F%3,-120
	set	FPO%3,4
	set	FPM%3,0x0020
	set	M%3,0x0000
	text
InitHardware:
	link.l	%fp,&-120
	fmovm	&0x0020,(FPO%3,%sp)
	mov.l	&L%420,(%sp)
	jsr	XOpenDisplay
	mov.l	%a0,dpy
	bne.b	L%421
	mov.l	&L%422,(%sp)
	jsr	Punt
L%421:
	mov.l	([dpy],132.w),SCREEN
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	cmp.l	(%a0,%d0.l,24.b),&280
	bge.b	L%423
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	fmov.l	(%a0,%d0.l,16.b),%fp0
	fdiv.d	&0x4088c00000000000,%fp0
	fmov.x	%fp0,%fp0
	fmov.s	%fp0,vppp
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	(%a0,%d0.l,16.b),%d0
	divs.l	&11,%d0
	br	L%%2
L%423:
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	fmov.l	(%a0,%d0.l,24.b),%fp0
	fmov.x	%fp0,%fp2
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	fmov.l	(%a0,%d0.l,16.b),%fp0
	fmov.x	%fp2,%fp1
	fmul.d	&0x4006a3d70a3d70a4,%fp1
	fdiv.x	%fp1,%fp0
	fmov.x	%fp0,%fp0
	fmov.s	%fp0,vppp
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	fmov.l	(%a0,%d0.l,16.b),%fp0
	fmov.x	%fp0,%fp2
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	fmov.l	(%a0,%d0.l,24.b),%fp0
	fmov.x	%fp2,%fp1
	fmul.d	&0x4039666666666666,%fp1
	fdiv.x	%fp0,%fp1
	fintrz.x	%fp1,%fp0
	fmov.l	%fp0,%d0
L%%2:
	mov.l	%d0,(%sp)
	jsr	InitTransfer
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	fmov.l	(%a0,%d0.l,20.b),%fp0
	fmov.x	%fp0,%fp2
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	fmov.l	(%a0,%d0.l,12.b),%fp0
	fmov.x	%fp2,%fp1
	fmul.d	&0x4006a3d70a3d70a4,%fp1
	fdiv.x	%fp1,%fp0
	fmov.x	%fp0,%fp0
	fmov.s	%fp0,hppp
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	(%a0,%d0.l,56.b),((S%3-82).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,52.b),((S%3-78).w,%fp)
	clr.l	((S%3-94).w,%fp)
	br.b	L%427
L%%3:
	mov.l	((S%3-94).w,%fp),%d0
	clr.l	(%d0.l*4,BitmapGC)
	mov.l	((S%3-94).w,%fp),((S%3-90).w,%fp)
	pea.l	((S%3-90).w,%fp)
	mov.l	&13,%d0
	mov.l	%d0,-(%sp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,8.b),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCreateGC
	add.l	&16,%sp
	mov.l	((S%3-94).w,%fp),%d0
	mov.l	%a0,(%d0.l*4,fillgc)
	add.l	&1,((S%3-94).w,%fp)
L%427:
	cmp.l	((S%3-94).w,%fp),&16
	blt	L%%3
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,12.b),((S%3-102).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,16.b),((S%3-98).w,%fp)
	lea.l	((S%3-102).w,%fp),%a0
	mov.l	4(%a0),(%sp)
	mov.l	0(%a0),-(%sp)
	jsr	NewHardware
	add.l	&4,%sp
	mov.l	%a0,%d0
	fmovm	(FPO%3,%sp),&0x0020
	unlk	%fp
	rts
	global	NewBitmapHardware
	set	S%4,0
	set	T%4,0
	set	F%4,-12
	set	FPO%4,4
	set	FPM%4,0x0000
	set	M%4,0x0000
NewHardware:
	link.l	%fp,&-12
	mov.l	&36,%d0
	mov.l	%d0,(%sp)
	jsr	malloc
	mov.l	%a0,((S%4-4).w,%fp)
	mov.l	&16,%d0
	mov.l	%d0,(%sp)
	jsr	malloc
	mov.l	%a0,((S%4-8).w,%fp)
	mov.l	%a0,([(S%4-4).w,%fp])
	clr.l	([(S%4-4).w,%fp],4.w)
	sub.l	%a0,%a0
	mov.l	%a0,([(S%4-4).w,%fp],28.w)
	mov.l	%a0,([(S%4-4).w,%fp],24.w)
	mov.l	(12,%fp),(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	NewDevicePoint
	add.l	&4,%sp
	lea.l	([(S%4-4).w,%fp],8.w),%a1
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0),(%a1)
	clr.l	([(S%4-8).w,%fp])
	clr.l	([(S%4-8).w,%fp],4.w)
	clr.w	([(S%4-4).w,%fp],32.w)
	mov.w	&1,([(S%4-4).w,%fp],34.w)
	clr.l	([(S%4-8).w,%fp],12.w)
	mov.l	((S%4-4).w,%fp),%a0
	mov.l	%a0,%d0
	unlk	%fp
	rts
	global	NewWindowHardware
	set	S%5,0
	set	T%5,0
	set	F%5,-108
	set	FPO%5,4
	set	FPM%5,0x0000
	set	M%5,0x0000
NewBitmapHardware:
	link.l	%fp,&-108
	mov.l	(12,%fp),(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	NewHardware
	add.l	&4,%sp
	mov.l	%a0,((S%5-94).w,%fp)
	mov.l	([(S%5-94).w,%fp]),((S%5-98).w,%fp)
	mov.l	&2,([(S%5-94).w,%fp],4.w)
	tst.l	(8,%fp)
	beq.b	L%_11
	tst.l	(12,%fp)
	bne.b	L%430
L%_11:
	sub.l	%a0,%a0
L%429:
	mov.l	%a0,%d0
	unlk	%fp
	rts
L%430:
	mov.l	&1,%d0
	mov.l	%d0,(%sp)
	mov.l	(12,%fp),-(%sp)
	mov.l	(8,%fp),-(%sp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,8.b),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCreatePixmap
	add.l	&16,%sp
	mov.l	%d0,([(S%5-98).w,%fp])
	tst.l	BitmapGC+12
	bne.b	L%431
	mov.l	&1,((S%5-82).w,%fp)
	clr.l	((S%5-78).w,%fp)
	clr.l	((S%5-102).w,%fp)
	br.b	L%434
L%%4:
	mov.l	((S%5-102).w,%fp),((S%5-90).w,%fp)
	pea.l	((S%5-90).w,%fp)
	mov.l	&13,%d0
	mov.l	%d0,-(%sp)
	mov.l	([(S%5-98).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCreateGC
	add.l	&16,%sp
	mov.l	((S%5-102).w,%fp),%d0
	mov.l	%a0,(%d0.l*4,BitmapGC)
	add.l	&1,((S%5-102).w,%fp)
L%434:
	cmp.l	((S%5-102).w,%fp),&16
	blt.b	L%%4
L%431:
	mov.l	(12,%fp),(%sp)
	mov.l	(8,%fp),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	mov.l	BitmapGC,-(%sp)
	mov.l	([(S%5-98).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XFillRectangle
	add.l	&24,%sp
	mov.l	((S%5-94).w,%fp),%a0
	bra	L%429
	data	2
L%438:
	byte	'R,'u,'n,'n,'i,'n,'g,0x20
	byte	's,'y,'n,'c,'h,'r,'o,'n
	byte	'i,'z,'e,'d,'.,'\n,0x00
L%441:
	byte	'P,'O,'S,'T,'S,'C,'R,'I
	byte	'P,'T,0x00
	text
	global	IsWindowHardware
	set	S%6,0
	set	T%6,0
	set	F%6,-232
	set	FPO%6,4
	set	FPM%6,0x0000
	set	M%6,0x0000
NewWindowHardware:
	link.l	%fp,&-232
	mov.l	(12,%fp),(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	NewHardware
	add.l	&4,%sp
	mov.l	%a0,((S%6-4).w,%fp)
	mov.l	([(S%6-4).w,%fp]),((S%6-8).w,%fp)
	mov.l	&1,([(S%6-4).w,%fp],4.w)
	mov.l	&202,((S%6-108).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,52.b),((S%6-164).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,56.b),((S%6-156).w,%fp)
	mov.l	&2,((S%6-144).w,%fp)
	mov.l	&-1,((S%6-140).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,12.b),%d0
	sub.l	(8,%fp),%d0
	mov.l	%d0,((S%6-224).w,%fp)
	clr.l	((S%6-220).w,%fp)
	mov.l	(8,%fp),((S%6-216).w,%fp)
	mov.l	(12,%fp),((S%6-212).w,%fp)
	mov.l	&3,((S%6-228).w,%fp)
	tst.l	TESTING
	beq.b	L%437
	mov.l	&L%438,(%sp)
	mov.l	&_iob+28,-(%sp)
	jsr	fprintf
	add.l	&4,%sp
	mov.l	&_iob+28,(%sp)
	jsr	fflush
	mov.l	&1,%d0
	mov.l	%d0,(%sp)
	mov.l	dpy,-(%sp)
	jsr	XSynchronize
	add.l	&4,%sp
L%437:
	pea.l	((S%6-168).w,%fp)
	mov.l	((S%6-108).w,%fp),-(%sp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,40.b),-(%sp)
	mov.l	&1,%d0
	mov.l	%d0,-(%sp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	(%a0,%d0.l,36.b),-(%sp)
	mov.l	&1,%d0
	mov.l	%d0,-(%sp)
	mov.l	(12,%fp),-(%sp)
	mov.l	(8,%fp),-(%sp)
	mov.l	((S%6-220).w,%fp),-(%sp)
	mov.l	((S%6-224).w,%fp),-(%sp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	(%a0,%d0.l,8.b),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCreateWindow
	add.l	&48,%sp
	mov.l	%d0,([(S%6-8).w,%fp])
	mov.l	&10,%d0
	mov.l	%d0,(%sp)
	mov.l	&L%441,-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	&8,%d0
	mov.l	%d0,-(%sp)
	mov.l	&31,%d0
	mov.l	%d0,-(%sp)
	mov.l	&39,%d0
	mov.l	%d0,-(%sp)
	mov.l	([(S%6-8).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XChangeProperty
	add.l	&28,%sp
	tst.l	TESTING
	beq.b	L%442
	pea.l	((S%6-228).w,%fp)
	mov.l	([(S%6-8).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XSetNormalHints
	add.l	&12,%sp
L%442:
	mov.l	&32768,(%sp)
	mov.l	([(S%6-8).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XSelectInput
	add.l	&8,%sp
	mov.l	([(S%6-8).w,%fp]),(%sp)
	mov.l	dpy,-(%sp)
	jsr	XMapWindow
	add.l	&4,%sp
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	dpy,-(%sp)
	jsr	XSync
	add.l	&4,%sp
	pea.l	((S%6-104).w,%fp)
	mov.l	dpy,-(%sp)
	jsr	XNextEvent
	add.l	&8,%sp
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	([(S%6-8).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XSelectInput
	add.l	&8,%sp
	mov.l	((S%6-4).w,%fp),%a0
	mov.l	%a0,%d0
	unlk	%fp
	rts
	global	DestroyHardware
	set	S%7,0
	set	T%7,0
	set	F%7,-4
	set	FPO%7,4
	set	FPM%7,0x0000
	set	M%7,0x0000
IsWindowHardware:
	link.l	%fp,&-4
	mov.l	&1,%d0
	and.l	([8.w,%fp],4.w),%d0
	unlk	%fp
	rts
	global	DeviceMatrix
	set	S%8,0
	set	T%8,0
	set	F%8,-8
	set	FPO%8,4
	set	FPM%8,0x0000
	set	M%8,0x0000
DestroyHardware:
	link.l	%fp,&-8
	tst.l	(8,%fp)
	beq.b	L%450
	mov.l	([8.w,%fp]),((S%8-4).w,%fp)
	btst	&0,([8.w,%fp],7.w)
	beq.b	L%451
	mov.l	([(S%8-4).w,%fp]),(%sp)
	mov.l	dpy,-(%sp)
	jsr	XDestroyWindow
	br.b	L%%5
L%451:
	btst	&1,([8.w,%fp],7.w)
	beq.b	L%454
	mov.l	([(S%8-4).w,%fp]),(%sp)
	mov.l	dpy,-(%sp)
	jsr	XFreePixmap
L%%5:
	add.l	&4,%sp
L%454:
	mov.l	(8,%fp),(%sp)
	jsr	free
L%450:
	unlk	%fp
	rts
	comm	__StRet,24
	global	HardwareExtent
	set	S%9,0
	set	T%9,0
	set	F%9,-28
	set	FPO%9,4
	set	FPM%9,0x0000
	set	M%9,0x0000
DeviceMatrix:
	link.l	%fp,&-28
	fmov.l	pixels_per_inch,%fp0
	fdiv.d	&0x4052000000000000,%fp0
	fmov.x	%fp0,%fp0
	fmov.s	%fp0,((S%9-24).w,%fp)
	mov.l	&0x00000000,((S%9-20).w,%fp)
	mov.l	&0x00000000,((S%9-16).w,%fp)
	mov.l	pixels_per_inch,%d0
	neg.l	%d0
	fmov.l	%d0,%fp0
	fdiv.d	&0x4052000000000000,%fp0
	fmov.x	%fp0,%fp0
	fmov.s	%fp0,((S%9-12).w,%fp)
	mov.l	&0x00000000,((S%9-8).w,%fp)
	fmov.l	(12,%fp),%fp0
	fmov.s	%fp0,((S%9-4).w,%fp)
	lea.l	((S%9-24).w,%fp),%a0
	mov.l	&__StRet,%a1
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0),(%a1)
	mov.l	&__StRet,%a0
	mov.l	%a0,%d0
	unlk	%fp
	rts
	comm	__StRet,8
	set	S%10,0
	set	T%10,0
	set	F%10,-4
	set	FPO%10,4
	set	FPM%10,0x0000
	set	M%10,0x0000
HardwareExtent:
	link.l	%fp,&-4
	tst.l	(8,%fp)
	beq.b	L%458
	lea.l	([8.w,%fp],8.w),%a0
	br.b	L%%6
L%458:
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&4,%sp
L%%6:
	mov.l	&__StRet,%a1
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0),(%a1)
	mov.l	&__StRet,%a0
	mov.l	%a0,%d0
	unlk	%fp
	rts
	global	BitBlt
	set	S%11,0
	set	T%11,0
	set	F%11,-12
	set	FPO%11,4
	set	FPM%11,0x0000
	set	M%11,0x0000
NeedAux:
	link.l	%fp,&-12
	tst.l	([8.w,%fp],24.w)
	bne.b	L%460
	mov.l	(8,%fp),(%sp)
	jsr	HardwareExtent
	lea.l	((S%11-8).w,%fp),%a1
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0),(%a1)
	mov.l	((S%11-4).w,%fp),(%sp)
	mov.l	((S%11-8).w,%fp),-(%sp)
	jsr	NewBitmapHardware
	add.l	&4,%sp
	mov.l	%a0,([8.w,%fp],24.w)
L%460:
	unlk	%fp
	rts
	data	1
	even
L%463:
	long	0
	text
	global	Paint
	set	S%12,0
	set	T%12,0
	set	F%12,-16
	set	FPO%12,4
	set	FPM%12,0x0000
	set	M%12,0x0000
BitBlt:
	link.l	%fp,&-16
	clr.l	((S%12-12).w,%fp)
	tst.l	(12,%fp)
	beq.b	L%481
	btst	&0,([8.w,%fp],7.w)
	beq.b	L%465
	btst	&0,([12.w,%fp],7.w)
	beq.b	L%481
L%465:
	mov.l	([12.w,%fp]),((S%12-8).w,%fp)
	btst	&0,([12.w,%fp],7.w)
	beq	L%466
	tst.l	(8,%fp)
	bne.b	L%467
	mov.l	(36,%fp),(%sp)
	mov.l	(32,%fp),-(%sp)
	mov.l	(28,%fp),-(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	(40,%fp),%d0
	mov.l	(%d0.l*4,fillgc),-(%sp)
	br	L%%7
L%481:
	unlk	%fp
	rts
L%467:
	mov.l	([8.w,%fp]),((S%12-4).w,%fp)
	btst	&0,([8.w,%fp],7.w)
	beq.b	L%469
	mov.l	(28,%fp),(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	(36,%fp),-(%sp)
	mov.l	(32,%fp),-(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	(40,%fp),%d0
	mov.l	(%d0.l*4,fillgc),-(%sp)
	br	L%%8
L%469:
	btst	&1,([8.w,%fp],7.w)
	beq	L%472
	mov.l	&1,%d0
	mov.l	%d0,(%sp)
	mov.l	(28,%fp),-(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	(36,%fp),-(%sp)
	mov.l	(32,%fp),-(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	&15,%d0
	sub.l	(40,%fp),%d0
	mov.l	(%d0.l*4,fillgc),-(%sp)
	mov.l	([(S%12-8).w,%fp]),-(%sp)
	mov.l	([(S%12-4).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCopyPlane
	add.l	&40,%sp
	br	L%472
L%466:
	btst	&1,([12.w,%fp],7.w)
	beq	L%475
	tst.l	(8,%fp)
	bne.b	L%476
	mov.l	(36,%fp),(%sp)
	mov.l	(32,%fp),-(%sp)
	mov.l	(28,%fp),-(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	(40,%fp),%d0
	mov.l	(%d0.l*4,BitmapGC),-(%sp)
L%%7:
	mov.l	([(S%12-8).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XFillRectangle
	add.l	&24,%sp
	bra.b	L%477
L%476:
	btst	&1,([8.w,%fp],7.w)
	beq.b	L%478
	mov.l	([8.w,%fp]),((S%12-4).w,%fp)
	mov.l	(28,%fp),(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	(36,%fp),-(%sp)
	mov.l	(32,%fp),-(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	(40,%fp),%d0
	mov.l	(%d0.l*4,BitmapGC),-(%sp)
L%%8:
	mov.l	([(S%12-8).w,%fp]),-(%sp)
	mov.l	([(S%12-4).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCopyArea
	add.l	&36,%sp
L%472:
L%478:
L%477:
L%475:
	mov.w	&1,([12.w,%fp],32.w)
	mov.w	&1,([12.w,%fp],34.w)
	tst.l	((S%12-12).w,%fp)
	beq.b	L%479
	mov.l	((S%12-12).w,%fp),(%sp)
	mov.l	dpy,-(%sp)
	jsr	XFreeGC
	add.l	&4,%sp
L%479:
	mov.l	L%463,%d0
	add.l	&1,L%463
	mov.l	&0,%d1
	tdivs.l	&50,%d1:%d0
	tst.l	%d1
	bne	L%481
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	dpy,-(%sp)
	jsr	XSync
	add.l	&4,%sp
	br	L%481
	data	1
	even
L%483:
	long	0
	data	2
L%485:
	byte	'P,'a,'i,'n,'t,'(,'),0x20
	byte	'c,'a,'l,'l,'e,'d,0x20,'w
	byte	'i,'t,'h,0x20,'n,'o,'n,'-
	byte	'b,'i,'t,'m,'a,'p,0x20,'s
	byte	'o,'u,'r,'c,'e,'.,'\n,0x00
	text
	global	FillPath
	set	S%13,0
	set	T%13,0
	set	F%13,-16
	set	FPO%13,4
	set	FPM%13,0x0000
	set	M%13,0x0000
Paint:
	link.l	%fp,&-16
	btst	&1,([8.w,%fp],7.w)
	bne.b	L%484
	tst.l	(8,%fp)
	beq.b	L%484
	mov.l	&L%485,(%sp)
	jsr	Punt
L%484:
	tst.l	(12,%fp)
	beq	L%488
	tst.w	([8.w,%fp],32.w)
	beq	L%488
	lea.l	(32,%fp),%a0
	mov.l	4(%a0),(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	(24,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	(16,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	(12,%fp),-(%sp)
	mov.l	(8,%fp),-(%sp)
	lea.l	(40,%fp),%a0
	mov.l	8(%a0),-(%sp)
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	jsr	ModifyGC
	add.l	&40,%sp
	mov.l	([12.w,%fp]),((S%13-12).w,%fp)
	mov.l	(36,%fp),(%sp)
	mov.l	(32,%fp),-(%sp)
	mov.l	(28,%fp),-(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	GlobalGC,-(%sp)
	mov.l	([(S%13-12).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XFillRectangle
	add.l	&24,%sp
	mov.w	&1,([12.w,%fp],32.w)
	mov.w	&1,([12.w,%fp],34.w)
	add.l	&1,L%483
	mov.l	L%483,%d0
	mov.l	&0,%d1
	tdivs.l	&100,%d1:%d0
	tst.l	%d1
	bne.b	L%488
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	dpy,-(%sp)
	jsr	XSync
	add.l	&4,%sp
L%488:
	unlk	%fp
	rts
	data	1
	even
L%491:
	long	0
	data	2
L%494:
	byte	'N,'o,'t,0x20,'e,'n,'o,'u
	byte	'g,'h,0x20,'m,'e,'m,'o,'r
	byte	'y,0x20,'f,'o,'r,0x20,'f,'i
	byte	'l,'l,'i,'n,'g,'.,'\n,0x00
L%500:
	byte	'P,'a,'t,'h,'F,'r,'e,'e
	byte	0x20,'g,'i,'v,'e,'n,0x20,'N
	byte	'U,'L,'L,0x00
L%512:
	byte	'P,'a,'t,'h,'F,'r,'e,'e
	byte	0x20,'g,'i,'v,'e,'n,0x20,'N
	byte	'U,'L,'L,0x00
	set	S%14,0
	set	T%14,0
	set	F%14,-16
	set	FPO%14,8
	set	FPM%14,0x0000
	set	M%14,0x0400
	text
FillPath:
	link.l	%fp,&-16
	movm.l	&0x0400,(4,%sp)
	clr.l	((S%14-4).w,%fp)
	tst.l	L%491
	bne.b	L%492
	mov.l	&60000,(%sp)
	jsr	malloc
	mov.l	%a0,L%491
	bne.b	L%493
	mov.l	&L%494,(%sp)
	jsr	Punt
L%493:
L%492:
	tst.l	(12,%fp)
	bne.b	L%_13
	mov.l	&1,%d0
	bne	L%_12
	br.b	L%495
L%_13:
	mov.l	([12.w,%fp],28.w),%a0
	cmp.l	%a0,(12,%fp)
	beq	L%_12
L%495:
	mov.l	(12,%fp),(%sp)
	jsr	FlattenPath
	mov.l	%a0,(12,%fp)
	mov.l	%a0,(%sp)
	jsr	CloseAll
	tst.l	%d0
	bne.b	L%497
	tst.l	(12,%fp)
	bne.b	L%498
	mov.l	&L%500,(%sp)
	jsr	Panic
L%498:
	mov.l	([12.w,%fp],32.w),%a0
	mov.l	free_pelem,(%a0,28.w)
	mov.l	(12,%fp),([12.w,%fp],32.w)
	mov.l	(12,%fp),free_pelem
	mov.l	&0,%d0
L%490:
	movm.l	(4,%sp),&0x0400
	unlk	%fp
	rts
L%497:
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&4,%sp
	mov.l	4(%a0),(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	(8,%fp),-(%sp)
	sub.l	%a0,%a0
	mov.l	%a0,-(%sp)
	lea.l	([gstate],24.w),%a0
	mov.l	8(%a0),-(%sp)
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	jsr	ModifyGC
	add.l	&40,%sp
	mov.l	([8.w,%fp]),((S%14-8).w,%fp)
	mov.l	([12.w,%fp],28.w),%a2
	br	L%503
L%%9:
	mov.l	(%a2),%d0
	cmp.l	%d0,&1
	beq.b	L%506
	cmp.l	%d0,&2
	beq	L%509
	cmp.l	%d0,&5
	bne	L%504
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	%d0,-(%sp)
	mov.l	((S%14-4).w,%fp),-(%sp)
	mov.l	L%491,-(%sp)
	mov.l	GlobalGC,-(%sp)
	mov.l	([(S%14-8).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XFillPolygon
	add.l	&24,%sp
	clr.l	((S%14-4).w,%fp)
	bra	L%504
L%506:
	cmp.l	((S%14-4).w,%fp),&1
	ble.b	L%507
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	%d0,-(%sp)
	mov.l	((S%14-4).w,%fp),-(%sp)
	mov.l	L%491,-(%sp)
	mov.l	GlobalGC,-(%sp)
	mov.l	([(S%14-8).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XFillPolygon
	add.l	&24,%sp
L%507:
	fintrz.s	(%a2,4.w),%fp0
	fmov.w	%fp0,([L%491])
	fintrz.s	(%a2,8.w),%fp0
	fmov.w	%fp0,([L%491],2.w)
	mov.l	&1,((S%14-4).w,%fp)
	bra.b	L%504
L%509:
	fintrz.s	(%a2,4.w),%fp0
	fmov.l	%fp0,%d0
	mov.l	((S%14-4).w,%fp),%d1
	mov.w	%d0,([L%491],%d1.l*4)
	fintrz.s	(%a2,8.w),%fp0
	fmov.l	%fp0,%d0
	mov.l	((S%14-4).w,%fp),%d1
	add.l	&1,((S%14-4).w,%fp)
	lea.l	([L%491],%d1.l*4),%a0
	mov.w	%d0,(%a0,2.w)
L%504:
	mov.l	(%a2,28.w),%a2
L%503:
	cmp.l	%a2,(12,%fp)
	bne	L%%9
	tst.l	(12,%fp)
	bne.b	L%511
	mov.l	&L%512,(%sp)
	jsr	Panic
L%511:
	mov.l	([12.w,%fp],32.w),%a0
	mov.l	free_pelem,(%a0,28.w)
	mov.l	(12,%fp),([12.w,%fp],32.w)
	mov.l	(12,%fp),free_pelem
	mov.w	&1,([8.w,%fp],32.w)
	mov.w	&1,([8.w,%fp],34.w)
L%_12:
	mov.l	&1,%d0
	bra	L%490
	data	2
L%517:
	byte	'X,'v,'a,'l,'u,'e,':,0x20
	byte	'a,'x,'=,'%,'d,',,0x20,'a
	byte	'y,'=,'%,'d,',,0x20,'b,'x
	byte	'=,'%,'d,',,0x20,'b,'y,'=
	byte	'%,'d,',,0x20,'c,'y,'=,'%
	byte	'd,'\n,0x00
	text
	global	BitBltTrapezoid
	set	S%15,0
	set	T%15,0
	set	F%15,-4
	set	FPO%15,4
	set	FPM%15,0x0000
	set	M%15,0x0000
Xvalue:
	link.l	%fp,&-4
	mov.l	(12,%fp),%d0
	sub.l	(20,%fp),%d0
	bne.b	L%515
	mov.l	(24,%fp),(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	(12,%fp),-(%sp)
	mov.l	(8,%fp),-(%sp)
	mov.l	&L%517,-(%sp)
	jsr	printf
	add.l	&20,%sp
	mov.l	(24,%fp),%d0
	sub.l	(20,%fp),%d0
	mov.l	(8,%fp),%d1
	sub.l	(16,%fp),%d1
	muls.l	%d1,%d0
	add.l	(16,%fp),%d0
L%514:
	unlk	%fp
	rts
L%515:
	mov.l	(24,%fp),%d0
	sub.l	(20,%fp),%d0
	mov.l	(8,%fp),%d1
	sub.l	(16,%fp),%d1
	muls.l	%d1,%d0
	fmov.l	%d0,%fp0
	mov.l	(12,%fp),%d0
	sub.l	(20,%fp),%d0
	fmov.l	%d0,%fp1
	fdiv.x	%fp1,%fp0
	fadd.l	(16,%fp),%fp0
	fintrz.x	%fp0,%fp0
	fmov.l	%fp0,%d0
	bra.b	L%514
	lcomm	L%519,4096
	lcomm	L%520,4096
	global	PaintTrapezoid
	set	S%16,0
	set	T%16,0
	set	F%16,-40
	set	FPO%16,4
	set	FPM%16,0x0000
	set	M%16,0x0000
BitBltTrapezoid:
	link.l	%fp,&-40
	mov.l	(44,%fp),(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	(12,%fp),-(%sp)
	jsr	Xvalue
	add.l	&16,%sp
	ext.l	%d0
	mov.l	%d0,((S%16-16).w,%fp)
	mov.l	(44,%fp),(%sp)
	mov.l	(40,%fp),-(%sp)
	mov.l	(36,%fp),-(%sp)
	mov.l	(32,%fp),-(%sp)
	mov.l	(28,%fp),-(%sp)
	jsr	Xvalue
	add.l	&16,%sp
	ext.l	%d0
	mov.l	%d0,((S%16-20).w,%fp)
	mov.l	(48,%fp),(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	(12,%fp),-(%sp)
	jsr	Xvalue
	add.l	&16,%sp
	ext.l	%d0
	mov.l	%d0,((S%16-24).w,%fp)
	mov.l	(48,%fp),(%sp)
	mov.l	(40,%fp),-(%sp)
	mov.l	(36,%fp),-(%sp)
	mov.l	(32,%fp),-(%sp)
	mov.l	(28,%fp),-(%sp)
	jsr	Xvalue
	add.l	&16,%sp
	ext.l	%d0
	mov.l	%d0,((S%16-28).w,%fp)
	mov.l	((S%16-16).w,%fp),%d0
	cmp.l	%d0,((S%16-24).w,%fp)
	bne	L%521
	mov.l	((S%16-20).w,%fp),%d0
	cmp.l	%d0,((S%16-28).w,%fp)
	bne	L%521
	cmp.l	%d0,((S%16-16).w,%fp)
	bge.b	L%522
	mov.l	%d0,((S%16-12).w,%fp)
	mov.l	((S%16-16).w,%fp),((S%16-20).w,%fp)
	mov.l	((S%16-12).w,%fp),((S%16-16).w,%fp)
L%522:
	mov.l	(52,%fp),(%sp)
	mov.l	(48,%fp),%d0
	sub.l	(44,%fp),%d0
	add.l	&1,%d0
	mov.l	%d0,-(%sp)
	mov.l	((S%16-20).w,%fp),%d0
	sub.l	((S%16-16).w,%fp),%d0
	add.l	&1,%d0
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	(44,%fp),-(%sp)
	mov.l	((S%16-16).w,%fp),-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	(8,%fp),-(%sp)
	sub.l	%a0,%a0
	mov.l	%a0,-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
L%518:
	unlk	%fp
	rts
L%521:
	mov.l	(44,%fp),((S%16-4).w,%fp)
	clr.l	((S%16-8).w,%fp)
	br	L%525
L%%10:
	mov.l	%d0,(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	(12,%fp),-(%sp)
	jsr	Xvalue
	add.l	&16,%sp
	ext.l	%d0
	mov.l	%d0,((S%16-32).w,%fp)
	mov.l	((S%16-4).w,%fp),(%sp)
	mov.l	(40,%fp),-(%sp)
	mov.l	(36,%fp),-(%sp)
	mov.l	(32,%fp),-(%sp)
	mov.l	(28,%fp),-(%sp)
	jsr	Xvalue
	add.l	&16,%sp
	ext.l	%d0
	mov.l	%d0,((S%16-36).w,%fp)
	cmp.l	%d0,((S%16-32).w,%fp)
	bge.b	L%526
	mov.l	%d0,((S%16-12).w,%fp)
	mov.l	((S%16-32).w,%fp),((S%16-36).w,%fp)
	mov.l	((S%16-12).w,%fp),((S%16-32).w,%fp)
L%526:
	mov.l	((S%16-8).w,%fp),%d0
	mov.l	((S%16-32).w,%fp),(%d0.l*4,L%519)
	mov.l	((S%16-8).w,%fp),%d0
	mov.l	((S%16-36).w,%fp),(%d0.l*4,L%520)
	add.l	&1,((S%16-4).w,%fp)
	add.l	&1,((S%16-8).w,%fp)
L%525:
	mov.l	((S%16-4).w,%fp),%d0
	cmp.l	%d0,(48,%fp)
	ble	L%%10
	mov.l	(52,%fp),%d0
	mov.l	(%d0.l*4,single_rop),(%sp)
	mov.l	&L%520,-(%sp)
	mov.l	&L%519,-(%sp)
	mov.l	(48,%fp),%d0
	sub.l	(44,%fp),%d0
	mov.l	%d0,-(%sp)
	mov.l	(44,%fp),-(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	BitBltBlob
	add.l	&20,%sp
	mov.w	&1,([8.w,%fp],32.w)
	mov.w	&1,([8.w,%fp],34.w)
	br	L%518
	data	2
L%539:
	byte	'H,'a,'l,'f,'T,'o,'n,'e
	byte	0x20,'G,'C,0x20,'n,'o,'t,0x20
	byte	's,'e,'t,'!,'\n,0x00
	text
	global	BitBltLine
	set	S%17,0
	set	T%17,0
	set	F%17,-148
	set	FPO%17,4
	set	FPM%17,0x0000
	set	M%17,0x0000
PaintTrapezoid:
	link.l	%fp,&-148
	clr.l	((S%17-4).w,%fp)
	clr.l	((S%17-20).w,%fp)
	clr.l	((S%17-24).w,%fp)
	clr.l	((S%17-118).w,%fp)
	pea.l	((S%17-4).w,%fp)
	pea.l	((S%17-122).w,%fp)
	lea.l	(52,%fp),%a0
	mov.l	8(%a0),-(%sp)
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	jsr	RealColor
	add.l	&20,%sp
	mov.l	%d0,((S%17-126).w,%fp)
	btst	&1,([8.w,%fp],7.w)
	beq	L%529
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	lea.l	(%a0,%d0.l),%a0
	mov.l	((S%17-122).w,%fp),%d0
	cmp.l	%d0,(%a0,52.w)
	bne.b	L%_14
	mov.l	&0,%d0
	br.b	L%_15
L%_14:
	mov.l	&15,%d0
L%_15:
	mov.l	%d0,(%sp)
	mov.l	(48,%fp),-(%sp)
	mov.l	(44,%fp),-(%sp)
	lea.l	(36,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	(28,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	(20,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	(12,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	BitBltTrapezoid
	add.l	&44,%sp
L%536:
	unlk	%fp
	rts
L%529:
	tst.l	(8,%fp)
	beq.b	L%536
	mov.l	(48,%fp),(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	(12,%fp),-(%sp)
	jsr	Xvalue
	add.l	&16,%sp
	mov.w	%d0,((S%17-142).w,%fp)
	mov.w	(50,%fp),((S%17-140).w,%fp)
	mov.l	(44,%fp),(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	(12,%fp),-(%sp)
	jsr	Xvalue
	add.l	&16,%sp
	mov.w	%d0,((S%17-138).w,%fp)
	mov.w	(46,%fp),((S%17-136).w,%fp)
	mov.l	(44,%fp),(%sp)
	mov.l	(40,%fp),-(%sp)
	mov.l	(36,%fp),-(%sp)
	mov.l	(32,%fp),-(%sp)
	mov.l	(28,%fp),-(%sp)
	jsr	Xvalue
	add.l	&16,%sp
	mov.w	%d0,((S%17-134).w,%fp)
	mov.w	(46,%fp),((S%17-132).w,%fp)
	mov.l	(48,%fp),(%sp)
	mov.l	(40,%fp),-(%sp)
	mov.l	(36,%fp),-(%sp)
	mov.l	(32,%fp),-(%sp)
	mov.l	(28,%fp),-(%sp)
	jsr	Xvalue
	add.l	&16,%sp
	mov.w	%d0,((S%17-130).w,%fp)
	mov.w	(50,%fp),((S%17-128).w,%fp)
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	UpdateControl
	add.l	&4,%sp
	cmp.l	((S%17-126).w,%fp),&1
	bne	L%531
	mov.l	&3,((S%17-114).w,%fp)
	mov.l	((S%17-122).w,%fp),((S%17-106).w,%fp)
	mov.l	&1,%d0
	or.l	((S%17-20).w,%fp),%d0
	or.l	&4,%d0
	mov.l	%d0,((S%17-20).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	lea.l	(%a0,%d0.l),%a0
	mov.l	((S%17-122).w,%fp),%d0
	cmp.l	%d0,(%a0,56.w)
	bne.b	L%532
	mov.l	fillgc+12,((S%17-118).w,%fp)
L%532:
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	lea.l	(%a0,%d0.l),%a0
	mov.l	((S%17-122).w,%fp),%d0
	cmp.l	%d0,(%a0,52.w)
	bne.b	L%533
	mov.l	whitegc,((S%17-118).w,%fp)
L%533:
	mov.l	([8.w,%fp]),((S%17-8).w,%fp)
	cmp.l	([(S%17-8).w,%fp],12.w),&1
	bne	L%534
	mov.l	([(S%17-8).w,%fp],8.w),%d0
	cmp.l	%d0,((S%17-122).w,%fp)
	bne	L%534
	mov.l	&1,((S%17-24).w,%fp)
	br	L%538
L%531:
	cmp.l	((S%17-126).w,%fp),&2
	bne	L%536
	mov.l	&3,((S%17-114).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,56.b),((S%17-106).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,52.b),((S%17-102).w,%fp)
	mov.l	&3,((S%17-82).w,%fp)
	mov.l	([(S%17-4).w,%fp]),((S%17-12).w,%fp)
	mov.l	([(S%17-12).w,%fp]),((S%17-66).w,%fp)
	mov.l	&1,%d0
	or.l	((S%17-20).w,%fp),%d0
	or.l	&4,%d0
	or.l	&8,%d0
	or.l	&256,%d0
	or.l	&2048,%d0
	mov.l	%d0,((S%17-20).w,%fp)
	mov.l	([(S%17-12).w,%fp],4.w),((S%17-118).w,%fp)
	mov.l	([8.w,%fp]),((S%17-8).w,%fp)
	cmp.l	([(S%17-8).w,%fp],12.w),&2
	bne.b	L%537
	mov.l	([(S%17-8).w,%fp],8.w),%d0
	cmp.l	%d0,([(S%17-12).w,%fp])
	bne.b	L%537
	mov.l	&1,((S%17-24).w,%fp)
L%537:
	tst.l	((S%17-118).w,%fp)
	bne.b	L%538
	mov.l	&L%539,(%sp)
	jsr	printf
L%538:
L%534:
	tst.l	([8.w,%fp],28.w)
	beq.b	L%541
	mov.l	([8.w,%fp],28.w),%a0
	mov.l	(%a0),((S%17-8).w,%fp)
	mov.l	([(S%17-8).w,%fp]),((S%17-34).w,%fp)
	mov.l	((S%17-20).w,%fp),%d0
	or.l	&524288,%d0
	mov.l	%d0,((S%17-20).w,%fp)
	tst.l	((S%17-24).w,%fp)
	beq.b	L%542
	mov.l	([8.w,%fp]),%a0
	mov.l	(%a0,4.w),((S%17-118).w,%fp)
L%542:
	clr.l	((S%17-118).w,%fp)
L%541:
	tst.l	((S%17-118).w,%fp)
	bne.b	L%543
	pea.l	((S%17-114).w,%fp)
	mov.l	((S%17-20).w,%fp),-(%sp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,8.b),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCreateGC
	add.l	&16,%sp
	mov.l	%a0,((S%17-118).w,%fp)
L%543:
	mov.l	([8.w,%fp]),((S%17-16).w,%fp)
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	%d0,-(%sp)
	mov.l	&4,%d0
	mov.l	%d0,-(%sp)
	pea.l	((S%17-142).w,%fp)
	mov.l	((S%17-118).w,%fp),-(%sp)
	mov.l	([(S%17-16).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XFillPolygon
	add.l	&24,%sp
	mov.l	([8.w,%fp]),((S%17-8).w,%fp)
	mov.l	((S%17-126).w,%fp),([(S%17-8).w,%fp],12.w)
	mov.l	((S%17-118).w,%fp),([(S%17-8).w,%fp],4.w)
	mov.l	&1,%d0
	mov.l	%d0,(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	UpdateControl
	add.l	&4,%sp
	mov.w	&1,([8.w,%fp],32.w)
	mov.w	&1,([8.w,%fp],34.w)
	br	L%536
	global	PaintLine
	set	S%18,0
	set	T%18,0
	set	F%18,-8
	set	FPO%18,4
	set	FPM%18,0x0000
	set	M%18,0x0000
BitBltLine:
	link.l	%fp,&-8
	tst.l	(8,%fp)
	beq	L%545
	mov.l	([8.w,%fp]),((S%18-4).w,%fp)
	btst	&0,([8.w,%fp],7.w)
	beq.b	L%546
	mov.l	(24,%fp),(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	(12,%fp),-(%sp)
	mov.l	(28,%fp),%d0
	mov.l	(%d0.l*4,fillgc),-(%sp)
	br.b	L%%11
L%546:
	btst	&1,([8.w,%fp],7.w)
	beq.b	L%549
	mov.l	(24,%fp),(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	(12,%fp),-(%sp)
	mov.l	(28,%fp),%d0
	mov.l	(%d0.l*4,BitmapGC),-(%sp)
L%%11:
	mov.l	([(S%18-4).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XDrawLine
	add.l	&24,%sp
L%549:
	mov.w	&1,([8.w,%fp],32.w)
	mov.w	&1,([8.w,%fp],34.w)
L%545:
	unlk	%fp
	rts
	global	BitBltBlob
	set	S%19,0
	set	T%19,0
	set	F%19,-44
	set	FPO%19,4
	set	FPM%19,0x0000
	set	M%19,0x0000
PaintLine:
	link.l	%fp,&-44
	tst.l	(8,%fp)
	beq.b	L%550
	btst	&0,([8.w,%fp],7.w)
	beq.b	L%_16
	lea.l	(28,%fp),%a0
	mov.l	8(%a0),(%sp)
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	jsr	HardColour
	add.l	&8,%sp
	br.b	L%_17
L%550:
	unlk	%fp
	rts
L%_16:
	mov.l	&0,%d0
L%_17:
	mov.l	%d0,((S%19-4).w,%fp)
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	UpdateControl
	add.l	&4,%sp
	tst.l	([8.w,%fp],28.w)
	bne.b	L%553
	tst.l	((S%19-4).w,%fp)
	beq.b	L%_18
	jsr	TransferSize
	sub.l	&1,%d0
	mov.l	((S%19-4).w,%fp),%d1
	cmp.l	%d1,%d0
	bne.b	L%553
L%_18:
	tst.l	((S%19-4).w,%fp)
	bne.b	L%_19
	mov.l	&15,%d0
	br.b	L%_20
L%_19:
	mov.l	&0,%d0
L%_20:
	mov.l	%d0,(%sp)
	lea.l	(20,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	(12,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	BitBltLine
	add.l	&20,%sp
	bra	L%554
L%553:
	mov.l	(12,%fp),%d0
	cmp.l	%d0,(20,%fp)
	blt.b	L%_22
	mov.l	(20,%fp),%d0
L%_22:
	mov.l	%d0,((S%19-8).w,%fp)
	mov.l	(16,%fp),%d0
	cmp.l	%d0,(24,%fp)
	blt.b	L%_24
	mov.l	(24,%fp),%d0
L%_24:
	mov.l	%d0,((S%19-12).w,%fp)
	mov.l	(12,%fp),%d0
	cmp.l	%d0,(20,%fp)
	bgt.b	L%_26
	mov.l	(20,%fp),%d0
L%_26:
	mov.l	%d0,((S%19-16).w,%fp)
	mov.l	(16,%fp),%d0
	cmp.l	%d0,(24,%fp)
	bgt.b	L%_28
	mov.l	(24,%fp),%d0
L%_28:
	mov.l	%d0,((S%19-20).w,%fp)
	mov.l	((S%19-12).w,%fp),(%sp)
	mov.l	((S%19-8).w,%fp),-(%sp)
	jsr	NewDevicePoint
	add.l	&4,%sp
	lea.l	((S%19-28).w,%fp),%a1
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0),(%a1)
	mov.l	((S%19-20).w,%fp),%d0
	sub.l	((S%19-12).w,%fp),%d0
	add.l	&1,%d0
	mov.l	%d0,(%sp)
	mov.l	((S%19-16).w,%fp),%d0
	sub.l	((S%19-8).w,%fp),%d0
	add.l	&1,%d0
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&4,%sp
	lea.l	((S%19-36).w,%fp),%a1
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0),(%a1)
	mov.l	(8,%fp),(%sp)
	jsr	NeedAux
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	lea.l	((S%19-36).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	((S%19-28).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	((S%19-28).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	([8.w,%fp],24.w),-(%sp)
	sub.l	%a0,%a0
	mov.l	%a0,-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
	mov.l	&15,%d0
	mov.l	%d0,(%sp)
	lea.l	(20,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	(12,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	([8.w,%fp],24.w),-(%sp)
	jsr	BitBltLine
	add.l	&20,%sp
	mov.l	&1,%d0
	mov.l	%d0,(%sp)
	lea.l	((S%19-36).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	((S%19-28).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	((S%19-28).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	([8.w,%fp],24.w),-(%sp)
	mov.l	([8.w,%fp],28.w),-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
	mov.l	&4,%d0
	mov.l	%d0,(%sp)
	lea.l	((S%19-36).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	((S%19-28).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	((S%19-28).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	(8,%fp),-(%sp)
	mov.l	([8.w,%fp],24.w),-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
	tst.l	((S%19-4).w,%fp)
	beq.b	L%555
	jsr	TransferSize
	sub.l	&1,%d0
	mov.l	((S%19-4).w,%fp),%d1
	cmp.l	%d1,%d0
	beq.b	L%555
	mov.l	%d1,(%sp)
	jsr	GraySync
	mov.l	%a0,((S%19-40).w,%fp)
	mov.l	&1,%d0
	mov.l	%d0,(%sp)
	lea.l	((S%19-36).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	((S%19-28).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	([8.w,%fp],24.w),-(%sp)
	mov.l	((S%19-40).w,%fp),-(%sp)
	jsr	RasterTile
	add.l	&24,%sp
L%555:
	mov.l	&7,%d0
	mov.l	%d0,(%sp)
	lea.l	((S%19-36).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	((S%19-28).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	((S%19-28).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	(8,%fp),-(%sp)
	mov.l	([8.w,%fp],24.w),-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
L%554:
	mov.l	&1,%d0
	mov.l	%d0,(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	UpdateControl
	add.l	&4,%sp
	mov.w	&1,([8.w,%fp],32.w)
	mov.w	&1,([8.w,%fp],34.w)
	br	L%550
	global	RasterTile
	set	S%20,0
	set	T%20,0
	set	F%20,-24
	set	FPO%20,4
	set	FPM%20,0x0000
	set	M%20,0x0000
BitBltBlob:
	link.l	%fp,&-24
	clr.l	((S%20-4).w,%fp)
	br	L%559
L%%12:
	mov.l	(12,%fp),%d0
	add.l	((S%20-4).w,%fp),%d0
	mov.l	%d0,(%sp)
	mov.l	((S%20-4).w,%fp),%d0
	mov.l	([20.w,%fp],%d0.l*4),-(%sp)
	jsr	NewDevicePoint
	add.l	&4,%sp
	lea.l	((S%20-12).w,%fp),%a1
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0),(%a1)
	mov.l	(12,%fp),%d0
	add.l	((S%20-4).w,%fp),%d0
	mov.l	%d0,(%sp)
	mov.l	((S%20-4).w,%fp),%d0
	mov.l	([24.w,%fp],%d0.l*4),-(%sp)
	jsr	NewDevicePoint
	add.l	&4,%sp
	lea.l	((S%20-20).w,%fp),%a1
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0),(%a1)
	mov.l	(28,%fp),(%sp)
	lea.l	((S%20-20).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	((S%20-12).w,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	BitBltLine
	add.l	&20,%sp
	add.l	&1,((S%20-4).w,%fp)
L%559:
	mov.l	((S%20-4).w,%fp),%d0
	cmp.l	%d0,(16,%fp)
	blt	L%%12
	unlk	%fp
	rts
	data	1
	even
L%561:
	long	0
	even
L%562:
	long	0
	data	2
L%565:
	byte	'C,'a,'n,0x20,'o,'n,'l,'y
	byte	0x20,'R,'a,'s,'t,'e,'r,'T
	byte	'i,'l,'e,0x20,'f,'r,'o,'m
	byte	0x20,'B,'i,'t,'m,'a,'p,'.
	byte	0x00
	text
	global	ModifyGC
	set	S%21,0
	set	T%21,0
	set	F%21,-108
	set	FPO%21,4
	set	FPM%21,0x0000
	set	M%21,0x0000
RasterTile:
	link.l	%fp,&-108
	tst.l	(12,%fp)
	beq	L%560
	tst.l	(8,%fp)
	beq.b	L%_29
	btst	&0,([8.w,%fp],7.w)
	beq.b	L%564
L%_29:
	mov.l	&L%565,(%sp)
	jsr	Punt
L%564:
	mov.l	([8.w,%fp]),((S%21-4).w,%fp)
	mov.l	([12.w,%fp]),((S%21-8).w,%fp)
	mov.l	([(S%21-4).w,%fp]),((S%21-54).w,%fp)
	mov.l	&1,((S%21-66).w,%fp)
	mov.l	(32,%fp),((S%21-98).w,%fp)
	mov.l	&1281,((S%21-102).w,%fp)
	btst	&0,([12.w,%fp],7.w)
	beq	L%566
	tst.l	L%561
	bne.b	L%567
	pea.l	((S%21-98).w,%fp)
	mov.l	((S%21-102).w,%fp),-(%sp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,8.b),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCreateGC
	add.l	&16,%sp
	mov.l	%a0,L%561
	bra.b	L%568
L%560:
	unlk	%fp
	rts
L%567:
	pea.l	((S%21-98).w,%fp)
	mov.l	((S%21-102).w,%fp),-(%sp)
	mov.l	L%561,-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XChangeGC
	add.l	&16,%sp
L%568:
	mov.l	(28,%fp),(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	L%561,-(%sp)
	br	L%%13
L%566:
	btst	&1,([12.w,%fp],7.w)
	beq	L%571
	tst.l	L%562
	bne.b	L%572
	pea.l	((S%21-98).w,%fp)
	mov.l	((S%21-102).w,%fp),-(%sp)
	mov.l	([(S%21-8).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCreateGC
	add.l	&16,%sp
	mov.l	%a0,L%562
	bra.b	L%573
L%572:
	pea.l	((S%21-98).w,%fp)
	mov.l	((S%21-102).w,%fp),-(%sp)
	mov.l	L%562,-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XChangeGC
	add.l	&16,%sp
L%573:
	mov.l	(28,%fp),(%sp)
	mov.l	(24,%fp),-(%sp)
	mov.l	(20,%fp),-(%sp)
	mov.l	(16,%fp),-(%sp)
	mov.l	L%562,-(%sp)
L%%13:
	mov.l	([(S%21-8).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XFillRectangle
	add.l	&24,%sp
L%571:
	mov.w	&1,([12.w,%fp],32.w)
	mov.w	&1,([12.w,%fp],34.w)
	br	L%560
	global	RealColor
	set	S%22,0
	set	T%22,0
	set	F%22,-140
	set	FPO%22,4
	set	FPM%22,0x0000
	set	M%22,0x0000
ModifyGC:
	link.l	%fp,&-140
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,56.b),((S%22-32).w,%fp)
	clr.l	((S%22-130).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,8.b),((S%22-134).w,%fp)
	fmov.d	&0x406fe00000000000,%fp0
	fmul.s	(16,%fp),%fp0
	fadd.d	&0x3fe0000000000000,%fp0
	fintrz.x	%fp0,%fp0
	fmov.l	%fp0,%d0
	mov.l	(%d0.l*4,transfer),((S%22-4).w,%fp)
	bne.b	L%575
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,56.b),((S%22-32).w,%fp)
	br.b	L%%14
L%575:
	cmp.l	((S%22-4).w,%fp),&255
	bne.b	L%577
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,52.b),((S%22-32).w,%fp)
L%%14:
	mov.l	&1,((S%22-8).w,%fp)
	bra.b	L%578
L%577:
	mov.l	((S%22-4).w,%fp),(%sp)
	jsr	GraySync
	mov.l	%a0,((S%22-28).w,%fp)
	mov.l	([(S%22-28).w,%fp]),((S%22-16).w,%fp)
	mov.l	&2,((S%22-8).w,%fp)
L%578:
	btst	&1,([24.w,%fp],7.w)
	beq	L%579
	mov.l	([24.w,%fp]),%a0
	mov.l	(%a0),((S%22-134).w,%fp)
	mov.l	&3,((S%22-126).w,%fp)
	mov.l	&1,((S%22-118).w,%fp)
	clr.l	((S%22-114).w,%fp)
	clr.l	((S%22-94).w,%fp)
	clr.l	((S%22-46).w,%fp)
	mov.l	&524557,((S%22-130).w,%fp)
	cmp.l	((S%22-8).w,%fp),&2
	bne.b	L%580
	mov.l	&1,((S%22-94).w,%fp)
	mov.l	([(S%22-16).w,%fp]),((S%22-82).w,%fp)
	clr.l	((S%22-74).w,%fp)
	clr.l	((S%22-70).w,%fp)
	mov.l	((S%22-130).w,%fp),%d0
	or.l	&256,%d0
	or.l	&1024,%d0
	or.l	&4096,%d0
	or.l	&8192,%d0
	mov.l	%d0,((S%22-130).w,%fp)
L%580:
	tst.l	(20,%fp)
	beq	L%581
	mov.l	([20.w,%fp]),((S%22-12).w,%fp)
	tst.l	([24.w,%fp],28.w)
	beq	L%582
	mov.l	([24.w,%fp],28.w),%a0
	mov.l	(%a0),((S%22-20).w,%fp)
	cmp.l	((S%22-8).w,%fp),&2
	bne	L%583
	mov.l	(24,%fp),(%sp)
	jsr	NeedAux
	mov.l	&3,%d0
	mov.l	%d0,(%sp)
	lea.l	(44,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	(36,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	([24.w,%fp],24.w),-(%sp)
	mov.l	([24.w,%fp],28.w),-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
	mov.l	&1,%d0
	mov.l	%d0,(%sp)
	lea.l	(44,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	(28,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	([24.w,%fp],24.w),-(%sp)
	mov.l	(20,%fp),-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
	mov.l	([24.w,%fp],24.w),%a0
	mov.l	(%a0),((S%22-12).w,%fp)
	br	L%%15
L%583:
	mov.l	([(S%22-20).w,%fp]),((S%22-46).w,%fp)
	clr.l	((S%22-54).w,%fp)
	clr.l	((S%22-50).w,%fp)
	mov.l	&2,((S%22-94).w,%fp)
	mov.l	([(S%22-12).w,%fp]),((S%22-78).w,%fp)
	clr.l	((S%22-74).w,%fp)
	clr.l	((S%22-70).w,%fp)
	mov.l	((S%22-130).w,%fp),%d0
	or.l	&524288,%d0
	or.l	&131072,%d0
	or.l	&262144,%d0
	or.l	&256,%d0
	or.l	&2048,%d0
	or.l	&4096,%d0
	or.l	&8192,%d0
	mov.l	%d0,((S%22-130).w,%fp)
	bra	L%588
L%582:
	cmp.l	((S%22-8).w,%fp),&2
	bne.b	L%586
L%%15:
	mov.l	([(S%22-12).w,%fp]),((S%22-46).w,%fp)
	mov.l	(36,%fp),((S%22-54).w,%fp)
	mov.l	(40,%fp),((S%22-50).w,%fp)
	br	L%%16
L%586:
	mov.l	(24,%fp),(%sp)
	jsr	NeedAux
	mov.l	&3,%d0
	mov.l	%d0,(%sp)
	lea.l	(44,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	(28,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	([24.w,%fp],24.w),-(%sp)
	mov.l	(20,%fp),-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
	mov.l	([24.w,%fp],24.w),%a0
	mov.l	(%a0),((S%22-12).w,%fp)
	mov.l	([(S%22-12).w,%fp]),((S%22-46).w,%fp)
	mov.l	(36,%fp),((S%22-54).w,%fp)
	mov.l	(40,%fp),((S%22-50).w,%fp)
	mov.l	((S%22-130).w,%fp),%d0
	or.l	&524288,%d0
	or.l	&131072,%d0
	or.l	&262144,%d0
	mov.l	%d0,((S%22-130).w,%fp)
	bra	L%588
L%581:
	tst.l	([24.w,%fp],28.w)
	beq	L%589
	mov.l	([24.w,%fp],28.w),%a0
	mov.l	(%a0),((S%22-20).w,%fp)
	mov.l	([(S%22-20).w,%fp]),((S%22-46).w,%fp)
	br	L%%17
L%579:
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,8.b),((S%22-134).w,%fp)
	mov.l	&3,((S%22-126).w,%fp)
	mov.l	((S%22-32).w,%fp),((S%22-118).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,52.b),((S%22-114).w,%fp)
	clr.l	((S%22-94).w,%fp)
	clr.l	((S%22-46).w,%fp)
	mov.l	&524557,((S%22-130).w,%fp)
	cmp.l	((S%22-8).w,%fp),&2
	bne.b	L%591
	mov.l	&3,((S%22-94).w,%fp)
	mov.l	([(S%22-16).w,%fp]),((S%22-78).w,%fp)
	clr.l	((S%22-74).w,%fp)
	clr.l	((S%22-70).w,%fp)
	mov.l	((S%22-130).w,%fp),%d0
	or.l	&256,%d0
	or.l	&2048,%d0
	or.l	&4096,%d0
	or.l	&8192,%d0
	mov.l	%d0,((S%22-130).w,%fp)
L%591:
	tst.l	(20,%fp)
	beq	L%592
	mov.l	([20.w,%fp]),((S%22-12).w,%fp)
	tst.l	([24.w,%fp],28.w)
	beq	L%593
	mov.l	([24.w,%fp],28.w),%a0
	mov.l	(%a0),((S%22-20).w,%fp)
	cmp.l	((S%22-8).w,%fp),&2
	bne	L%594
	mov.l	(24,%fp),(%sp)
	jsr	NeedAux
	mov.l	&3,%d0
	mov.l	%d0,(%sp)
	lea.l	(44,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	(36,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	([24.w,%fp],24.w),-(%sp)
	mov.l	([24.w,%fp],28.w),-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
	mov.l	&1,%d0
	mov.l	%d0,(%sp)
	lea.l	(44,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	lea.l	(28,%fp),%a0
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	([24.w,%fp],24.w),-(%sp)
	mov.l	(20,%fp),-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
	mov.l	([24.w,%fp],24.w),%a0
	mov.l	(%a0),((S%22-12).w,%fp)
	mov.l	([(S%22-12).w,%fp]),((S%22-46).w,%fp)
	mov.l	(36,%fp),((S%22-54).w,%fp)
	mov.l	(40,%fp),((S%22-50).w,%fp)
	mov.l	&3,((S%22-94).w,%fp)
	mov.l	([(S%22-16).w,%fp]),((S%22-78).w,%fp)
	mov.l	((S%22-130).w,%fp),%d0
	or.l	&524288,%d0
	or.l	&131072,%d0
	or.l	&262144,%d0
	br	L%%18
L%594:
	btst	&0,([20.w,%fp],7.w)
	beq.b	L%596
	mov.l	([(S%22-20).w,%fp]),((S%22-46).w,%fp)
	mov.l	&1,((S%22-94).w,%fp)
	mov.l	([(S%22-12).w,%fp]),((S%22-82).w,%fp)
	mov.l	((S%22-130).w,%fp),%d0
	or.l	&524288,%d0
	or.l	&256,%d0
	or.l	&1024,%d0
	br	L%%19
L%596:
	mov.l	([(S%22-20).w,%fp]),((S%22-46).w,%fp)
	mov.l	&2,((S%22-94).w,%fp)
	mov.l	([(S%22-12).w,%fp]),((S%22-78).w,%fp)
	mov.l	((S%22-130).w,%fp),%d0
	or.l	&524288,%d0
	or.l	&256,%d0
	or.l	&2048,%d0
	mov.l	%d0,((S%22-130).w,%fp)
	bra	L%603
L%593:
	cmp.l	((S%22-8).w,%fp),&2
	bne.b	L%599
	mov.l	([(S%22-12).w,%fp]),((S%22-46).w,%fp)
L%%17:
	clr.l	((S%22-54).w,%fp)
	clr.l	((S%22-50).w,%fp)
L%%16:
	mov.l	((S%22-130).w,%fp),%d0
	or.l	&524288,%d0
	or.l	&131072,%d0
	or.l	&262144,%d0
	br	L%%19
L%599:
	btst	&0,([20.w,%fp],7.w)
	beq.b	L%601
	mov.l	([20.w,%fp]),((S%22-12).w,%fp)
	mov.l	&1,((S%22-94).w,%fp)
	mov.l	([(S%22-12).w,%fp]),((S%22-82).w,%fp)
	clr.l	((S%22-74).w,%fp)
	clr.l	((S%22-70).w,%fp)
	mov.l	((S%22-130).w,%fp),%d0
	or.l	&256,%d0
	or.l	&1024,%d0
	or.l	&4096,%d0
	or.l	&8192,%d0
	br	L%%19
L%601:
	mov.l	&2,((S%22-94).w,%fp)
	mov.l	([(S%22-12).w,%fp]),((S%22-78).w,%fp)
	mov.l	(36,%fp),%d0
	sub.l	(28,%fp),%d0
	mov.l	%d0,((S%22-74).w,%fp)
	mov.l	(40,%fp),%d0
	sub.l	(32,%fp),%d0
	mov.l	%d0,((S%22-70).w,%fp)
	mov.l	((S%22-130).w,%fp),%d0
	or.l	&256,%d0
	or.l	&2048,%d0
	or.l	&4096,%d0
	or.l	&8192,%d0
	mov.l	%d0,((S%22-130).w,%fp)
	bra	L%603
L%592:
	mov.l	([24.w,%fp]),((S%22-12).w,%fp)
	tst.l	([24.w,%fp],28.w)
	beq.b	L%604
	mov.l	([24.w,%fp],28.w),%a0
	mov.l	(%a0),((S%22-20).w,%fp)
	cmp.l	((S%22-8).w,%fp),&2
	bne.b	L%605
	mov.l	([(S%22-20).w,%fp]),((S%22-46).w,%fp)
	mov.l	&3,((S%22-94).w,%fp)
	mov.l	([(S%22-16).w,%fp]),((S%22-78).w,%fp)
	mov.l	((S%22-130).w,%fp),%d0
	or.l	&524288,%d0
	br.b	L%%18
L%605:
	mov.l	([(S%22-20).w,%fp]),((S%22-46).w,%fp)
	mov.l	((S%22-130).w,%fp),%d0
	or.l	&524288,%d0
	mov.l	%d0,((S%22-130).w,%fp)
	bra.b	L%607
L%604:
	cmp.l	((S%22-8).w,%fp),&2
	bne.b	L%608
	mov.l	&3,((S%22-94).w,%fp)
	mov.l	([(S%22-16).w,%fp]),((S%22-78).w,%fp)
	mov.l	((S%22-130).w,%fp),%d0
L%%18:
	or.l	&256,%d0
	or.l	&2048,%d0
L%%19:
	mov.l	%d0,((S%22-130).w,%fp)
L%589:
L%588:
L%608:
L%607:
L%603:
	tst.l	GlobalGC
	bne.b	L%609
	pea.l	((S%22-126).w,%fp)
	mov.l	((S%22-130).w,%fp),-(%sp)
	mov.l	((S%22-134).w,%fp),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCreateGC
	add.l	&16,%sp
	mov.l	%a0,GlobalGC
	br.b	L%%20
L%609:
	pea.l	((S%22-126).w,%fp)
	mov.l	((S%22-130).w,%fp),-(%sp)
	mov.l	GlobalGC,-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XChangeGC
	add.l	&16,%sp
L%%20:
	mov.l	((S%22-130).w,%fp),GlobalMask
	unlk	%fp
	rts
	global	GraySync
	set	S%23,0
	set	T%23,0
	set	F%23,-100
	set	FPO%23,4
	set	FPM%23,0x0000
	set	M%23,0x0000
RealColor:
	link.l	%fp,&-100
	fmov.d	&0x406fe00000000000,%fp0
	fmul.s	(16,%fp),%fp0
	fadd.d	&0x3fe0000000000000,%fp0
	fintrz.x	%fp0,%fp0
	fmov.l	%fp0,%d0
	mov.l	(%d0.l*4,transfer),((S%23-4).w,%fp)
	bne.b	L%613
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,56.b),([20.w,%fp])
	br	L%615
L%613:
	cmp.l	((S%23-4).w,%fp),&255
	bne	L%614
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,52.b),([20.w,%fp])
	tst.l	whitegc
	bne	L%615
	mov.l	&3,((S%23-94).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,52.b),((S%23-86).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,56.b),((S%23-82).w,%fp)
	pea.l	((S%23-94).w,%fp)
	mov.l	&13,%d0
	mov.l	%d0,-(%sp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,8.b),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCreateGC
	add.l	&16,%sp
	mov.l	%a0,whitegc
L%615:
	mov.l	&1,%d0
L%612:
	unlk	%fp
	rts
L%614:
	mov.l	((S%23-4).w,%fp),(%sp)
	jsr	GraySync
	mov.l	%a0,([24.w,%fp])
	mov.l	&2,%d0
	bra.b	L%612
	global	HardColour
	set	S%24,0
	set	T%24,0
	set	F%24,-4
	set	FPO%24,4
	set	FPM%24,0x0000
	set	M%24,0x0000
GraySync:
	link.l	%fp,&-4
	fmov.l	(8,%fp),%fp0
	fmul.l	screen_size,%fp0
	fdiv.d	&0x4070000000000000,%fp0
	fadd.d	&0x3fe0000000000000,%fp0
	fintrz.x	%fp0,%fp0
	fmov.l	%fp0,(8,%fp)
	mov.l	(8,%fp),%d0
	lsl.l	&4,%d0
	lea.l	([screen],%d0.l),%a0
	mov.l	(%a0,12.w),%a0
	mov.l	%a0,%d0
	unlk	%fp
	rts
	global	TransferSize
	set	S%25,0
	set	T%25,0
	set	F%25,-4
	set	FPO%25,4
	set	FPM%25,0x0000
	set	M%25,0x0000
HardColour:
	link.l	%fp,&-4
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	tst.l	(%a0,%d0.l,56.b)
	bne.b	L%618
	fmov.d	&0x406fe00000000000,%fp0
	fmul.s	(16,%fp),%fp0
	fadd.d	&0x3fe0000000000000,%fp0
	fintrz.x	%fp0,%fp0
	fmov.l	%fp0,%d0
	mov.l	&255,%d1
	sub.l	(%d0.l*4,transfer),%d1
	mov.l	%d1,%d0
L%617:
	unlk	%fp
	rts
L%618:
	fmov.d	&0x406fe00000000000,%fp0
	fmul.s	(16,%fp),%fp0
	fadd.d	&0x3fe0000000000000,%fp0
	fintrz.x	%fp0,%fp0
	fmov.l	%fp0,%d0
	mov.l	(%d0.l*4,transfer),%d0
	bra.b	L%617
	global	SetTransfer
	set	S%26,0
	set	T%26,0
	set	F%26,-4
	set	FPO%26,4
	set	FPM%26,0x0000
	set	M%26,0x0000
TransferSize:
	link.l	%fp,&-4
	mov.l	&256,%d0
	unlk	%fp
	rts
	global	StringFromHardware
	set	S%27,0
	set	T%27,0
	set	F%27,-8
	set	FPO%27,4
	set	FPM%27,0x0000
	set	M%27,0x0000
SetTransfer:
	link.l	%fp,&-8
	clr.l	((S%27-4).w,%fp)
	br.b	L%623
L%%21:
	mov.l	((S%27-4).w,%fp),%d0
	mov.l	%d0,%d1
	fmov.s	([8.w,%fp],%d1.l*4),%fp0
	fmul.d	&0x406fe00000000000,%fp0
	fadd.d	&0x3fe0000000000000,%fp0
	fmov.l	%fp0,(%d0.l*4,transfer)
	add.l	&1,((S%27-4).w,%fp)
L%623:
	cmp.l	((S%27-4).w,%fp),&256
	blt.b	L%%21
	unlk	%fp
	rts
	data	2
L%625:
	byte	'S,'t,'r,'i,'n,'g,'F,'r
	byte	'o,'m,'H,'a,'r,'d,'w,'a
	byte	'r,'e,0x20,'c,'a,'l,'l,'e
	byte	'd,'.,'\n,0x00
L%627:
	byte	'a,'n,'d,0x20,'i,'s,0x20,'g
	byte	'e,'t,'t,'i,'n,'g,0x20,'t
	byte	'h,'e,0x20,'i,'m,'a,'g,'e
	byte	'.,'\n,0x00
	text
	global	HardwareFromString
	set	S%28,0
	set	T%28,0
	set	F%28,-44
	set	FPO%28,4
	set	FPM%28,0x0000
	set	M%28,0x0000
StringFromHardware:
	link.l	%fp,&-44
	mov.l	&L%625,(%sp)
	jsr	printf
	tst.l	(8,%fp)
	beq.b	L%_30
	btst	&1,([8.w,%fp],7.w)
	bne.b	L%626
L%_30:
	sub.l	%a0,%a0
L%624:
	mov.l	%a0,%d0
	unlk	%fp
	rts
L%626:
	mov.l	&L%627,(%sp)
	jsr	printf
	mov.l	([8.w,%fp]),((S%28-8).w,%fp)
	mov.l	([8.w,%fp],8.w),((S%28-34).w,%fp)
	mov.l	([8.w,%fp],12.w),((S%28-38).w,%fp)
	mov.l	&1,%d0
	mov.l	%d0,(%sp)
	mov.l	&-1,%d0
	mov.l	%d0,-(%sp)
	mov.l	((S%28-38).w,%fp),-(%sp)
	mov.l	((S%28-34).w,%fp),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	mov.l	([(S%28-8).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XGetImage
	add.l	&28,%sp
	mov.l	%a0,((S%28-4).w,%fp)
	mov.l	((S%28-34).w,%fp),%d0
	add.l	&7,%d0
	tst.l	%d0
	bpl.b	L%_31
	neg.l	%d0
	lsr.l	&3,%d0
	neg.l	%d0
	bra.b	L%_32
L%_31:
	lsr.l	&3,%d0
L%_32:
	muls.l	((S%28-38).w,%fp),%d0
	mov.l	%d0,(%sp)
	jsr	malloc
	mov.l	%a0,((S%28-12).w,%fp)
	mov.l	%a0,((S%28-16).w,%fp)
	clr.l	((S%28-26).w,%fp)
	br	L%630
L%%24:
	clr.l	((S%28-22).w,%fp)
	br	L%633
L%%23:
	clr.b	((S%28-17).w,%fp)
	clr.l	((S%28-30).w,%fp)
	br.b	L%636
L%%22:
	mov.l	&0,%d0
	mov.b	((S%28-17).w,%fp),%d0
	add.l	%d0,%d0
	mov.b	%d0,((S%28-17).w,%fp)
	mov.l	((S%28-22).w,%fp),%d0
	add.l	((S%28-30).w,%fp),%d0
	cmp.l	%d0,((S%28-34).w,%fp)
	bge.b	L%637
	mov.l	((S%28-26).w,%fp),(%sp)
	mov.l	((S%28-22).w,%fp),%d0
	add.l	((S%28-30).w,%fp),%d0
	mov.l	%d0,-(%sp)
	mov.l	((S%28-4).w,%fp),-(%sp)
	mov.l	([(S%28-4).w,%fp],72.w),%a0
	jsr	(%a0)
	add.l	&8,%sp
	or.b	%d0,((S%28-17).w,%fp)
L%637:
	add.l	&1,((S%28-30).w,%fp)
L%636:
	cmp.l	((S%28-30).w,%fp),&8
	blt.b	L%%22
	add.l	&8,((S%28-22).w,%fp)
L%633:
	mov.l	((S%28-22).w,%fp),%d0
	cmp.l	%d0,((S%28-34).w,%fp)
	blt	L%%23
	mov.l	((S%28-16).w,%fp),%a0
	add.l	&1,((S%28-16).w,%fp)
	mov.b	((S%28-17).w,%fp),(%a0)
	add.l	&1,((S%28-26).w,%fp)
L%630:
	mov.l	((S%28-26).w,%fp),%d0
	cmp.l	%d0,((S%28-38).w,%fp)
	blt	L%%24
	mov.l	((S%28-4).w,%fp),(%sp)
	jsr	free
	mov.l	((S%28-12).w,%fp),%a0
	bra	L%624
	data	2
L%639:
	byte	'H,'a,'r,'d,'w,'a,'r,'e
	byte	'F,'r,'o,'m,'S,'t,'r,'i
	byte	'n,'g,0x20,'c,'a,'l,'l,'e
	byte	'd,'.,'\n,0x00
L%641:
	byte	'H,'a,'r,'d,'w,'a,'r,'e
	byte	'F,'r,'o,'m,'S,'t,'r,'i
	byte	'n,'g,0x20,'c,'a,'l,'l,'e
	byte	'd,0x20,'w,'i,'t,'h,0x20,'N
	byte	'U,'L,'L,0x20,'s,'t,'r,'i
	byte	'n,'g,'!,0x00
	set	S%29,0
	set	T%29,0
	set	F%29,-16
	set	FPO%29,4
	set	FPM%29,0x0000
	set	M%29,0x0000
	text
HardwareFromString:
	link.l	%fp,&-16
	mov.l	(16,%fp),(%sp)
	mov.l	(12,%fp),-(%sp)
	jsr	NewBitmapHardware
	add.l	&4,%sp
	mov.l	%a0,((S%29-4).w,%fp)
	mov.l	([(S%29-4).w,%fp]),((S%29-8).w,%fp)
	mov.l	&L%639,(%sp)
	jsr	printf
	tst.l	(8,%fp)
	bne.b	L%640
	mov.l	&L%641,(%sp)
	jsr	Punt
L%640:
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	&8,%d0
	mov.l	%d0,-(%sp)
	mov.l	([(S%29-4).w,%fp],12.w),-(%sp)
	mov.l	([(S%29-4).w,%fp],8.w),-(%sp)
	mov.l	(8,%fp),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	mov.l	&1,%d0
	mov.l	%d0,-(%sp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,40.b),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCreateImage
	add.l	&36,%sp
	mov.l	%a0,((S%29-12).w,%fp)
	mov.l	&1,([(S%29-12).w,%fp],28.w)
	mov.l	([(S%29-4).w,%fp],12.w),(%sp)
	mov.l	([(S%29-4).w,%fp],8.w),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	mov.l	((S%29-12).w,%fp),-(%sp)
	mov.l	BitmapGC+12,-(%sp)
	mov.l	([(S%29-8).w,%fp]),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XPutImage
	add.l	&36,%sp
	mov.l	((S%29-12).w,%fp),(%sp)
	jsr	free
	mov.w	&1,([(S%29-4).w,%fp],32.w)
	mov.w	&1,([(S%29-4).w,%fp],34.w)
	mov.l	((S%29-4).w,%fp),%a0
	mov.l	%a0,%d0
	unlk	%fp
	rts
	data	1
	even
L%645:
	long	0x3fe00000	# 5.000000e-01
	long	0x0
	text
	global	ScreenSize
	set	S%30,0
	set	T%30,0
	set	F%30,-8
	set	FPO%30,4
	set	FPM%30,0x0000
	set	M%30,0x0000
FreqSize:
	link.l	%fp,&-8
	fmov.l	pixels_per_inch,%fp0
	fdiv.d	(8,%fp),%fp0
	fadd.d	L%645,%fp0
	fintrz.x	%fp0,%fp0
	fmov.l	%fp0,((S%30-4).w,%fp)
	cmp.l	((S%30-4).w,%fp),&2
	bge.b	L%646
	mov.l	&2,%d0
L%644:
	unlk	%fp
	rts
L%646:
	mov.l	((S%30-4).w,%fp),%d0
	bra.b	L%644
	global	BuildScreen
	set	S%31,0
	set	T%31,0
	set	F%31,-8
	set	FPO%31,4
	set	FPM%31,0x0000
	set	M%31,0x0000
ScreenSize:
	link.l	%fp,&-8
	mov.l	(12,%fp),(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	FreqSize
	add.l	&4,%sp
	mov.l	%d0,((S%31-4).w,%fp)
	muls.l	%d0,%d0
	unlk	%fp
	rts
	set	S%32,0
	set	T%32,0
	set	F%32,-16
	set	FPO%32,4
	set	FPM%32,0x0000
	set	M%32,0x0000
BuildScreen:
	link.l	%fp,&-16
	mov.l	(12,%fp),(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	FreqSize
	add.l	&4,%sp
	mov.l	%d0,((S%32-4).w,%fp)
	clr.l	((S%32-8).w,%fp)
	br	L%651
L%%26:
	clr.l	((S%32-12).w,%fp)
	br.b	L%654
L%%25:
	mov.l	(24,%fp),%a0
	add.l	&4,(24,%fp)
	mov.l	((S%32-8).w,%fp),%d0
	add.l	%d0,%d0
	sub.l	((S%32-4).w,%fp),%d0
	add.l	&1,%d0
	fmov.l	%d0,%fp0
	fdiv.l	((S%32-4).w,%fp),%fp0
	fmov.x	%fp0,%fp0
	fmov.s	%fp0,(%a0)
	mov.l	(28,%fp),%a0
	add.l	&4,(28,%fp)
	mov.l	((S%32-12).w,%fp),%d0
	add.l	%d0,%d0
	sub.l	((S%32-4).w,%fp),%d0
	add.l	&1,%d0
	fmov.l	%d0,%fp0
	fdiv.l	((S%32-4).w,%fp),%fp0
	fmov.x	%fp0,%fp0
	fmov.s	%fp0,(%a0)
	add.l	&1,((S%32-12).w,%fp)
L%654:
	mov.l	((S%32-12).w,%fp),%d0
	cmp.l	%d0,((S%32-4).w,%fp)
	blt	L%%25
	add.l	&1,((S%32-8).w,%fp)
L%651:
	mov.l	((S%32-8).w,%fp),%d0
	cmp.l	%d0,((S%32-4).w,%fp)
	blt	L%%26
	unlk	%fp
	rts
	set	S%33,0
	set	T%33,0
	set	F%33,-4
	set	FPO%33,4
	set	FPM%33,0x0000
	set	M%33,0x0000
sgn:
	link.l	%fp,&-4
	fmov.d	(8,%fp),%fp0
	fcmp.d	%fp0,&0x0000000000000000
	fbneq	L%657
	mov.l	&0,%d0
L%656:
	unlk	%fp
	rts
L%657:
	fmov.d	(8,%fp),%fp0
	fcmp.d	%fp0,&0x0000000000000000
	fbge	L%658
	mov.l	&-1,%d0
	bra.b	L%656
L%658:
	mov.l	&1,%d0
	bra.b	L%656
	data	1
	even
L%661:
	long	0
	text
	global	SetScreen
	set	S%34,0
	set	T%34,0
	set	F%34,-12
	set	FPO%34,4
	set	FPM%34,0x0000
	set	M%34,0x0000
screen_cmp:
	link.l	%fp,&-12
	mov.l	(8,%fp),((S%34-4).w,%fp)
	mov.l	(12,%fp),((S%34-8).w,%fp)
	fmov.s	([(S%34-4).w,%fp]),%fp0
	fmov.s	([(S%34-8).w,%fp]),%fp1
	fsub.x	%fp1,%fp0
	fmov.d	%fp0,-(%sp)
	jsr	sgn
	add.l	&8,%sp
	unlk	%fp
	rts
	global	SetClipHardware
	set	S%35,0
	set	T%35,0
	set	F%35,-124
	set	FPO%35,4
	set	FPM%35,0x0000
	set	M%35,0x0000
SetScreen:
	link.l	%fp,&-124
	mov.l	(12,%fp),(%sp)
	mov.l	(8,%fp),-(%sp)
	jsr	FreqSize
	add.l	&4,%sp
	mov.l	%d0,((S%35-16).w,%fp)
	tst.l	screen
	beq.b	L%663
	clr.l	((S%35-8).w,%fp)
	br.b	L%666
L%%27:
	lsl.l	&4,%d0
	lea.l	([screen],%d0.l),%a0
	mov.l	(%a0,12.w),(%sp)
	jsr	DestroyHardware
	add.l	&1,((S%35-8).w,%fp)
L%666:
	mov.l	((S%35-8).w,%fp),%d0
	cmp.l	%d0,screen_size
	blt.b	L%%27
	mov.l	screen,(%sp)
	jsr	free
L%663:
	mov.l	((S%35-16).w,%fp),%d0
	muls.l	%d0,%d0
	mov.l	%d0,screen_size
	add.l	&1,%d0
	lsl.l	&4,%d0
	mov.l	%d0,(%sp)
	jsr	malloc
	mov.l	%a0,screen
	mov.l	%a0,((S%35-20).w,%fp)
	clr.l	((S%35-8).w,%fp)
	br.b	L%669
L%%29:
	clr.l	((S%35-12).w,%fp)
	br.b	L%672
L%%28:
	mov.l	(24,%fp),%a0
	add.l	&4,(24,%fp)
	fmov.s	(%a0),%fp0
	fmov.s	%fp0,([(S%35-20).w,%fp])
	mov.l	((S%35-8).w,%fp),([(S%35-20).w,%fp],4.w)
	mov.l	((S%35-12).w,%fp),([(S%35-20).w,%fp],8.w)
	add.l	&16,((S%35-20).w,%fp)
	add.l	&1,((S%35-12).w,%fp)
L%672:
	mov.l	((S%35-12).w,%fp),%d0
	cmp.l	%d0,((S%35-16).w,%fp)
	blt.b	L%%28
	add.l	&1,((S%35-8).w,%fp)
L%669:
	mov.l	((S%35-8).w,%fp),%d0
	cmp.l	%d0,((S%35-16).w,%fp)
	blt	L%%29
	mov.l	&screen_cmp,(%sp)
	mov.l	&16,%d0
	mov.l	%d0,-(%sp)
	mov.l	screen_size,-(%sp)
	mov.l	screen,-(%sp)
	jsr	qsort
	add.l	&12,%sp
	mov.l	((S%35-16).w,%fp),(%sp)
	mov.l	((S%35-16).w,%fp),-(%sp)
	jsr	NewBitmapHardware
	add.l	&4,%sp
	mov.l	%a0,((S%35-4).w,%fp)
	mov.l	&15,%d0
	mov.l	%d0,(%sp)
	mov.l	((S%35-16).w,%fp),-(%sp)
	mov.l	((S%35-16).w,%fp),-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	((S%35-4).w,%fp),-(%sp)
	sub.l	%a0,%a0
	mov.l	%a0,-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
	clr.l	((S%35-8).w,%fp)
	br	L%676
L%%30:
	mov.l	((S%35-16).w,%fp),(%sp)
	mov.l	((S%35-16).w,%fp),-(%sp)
	jsr	NewBitmapHardware
	add.l	&4,%sp
	mov.l	((S%35-8).w,%fp),%d0
	lsl.l	&4,%d0
	lea.l	([screen],%d0.l),%a1
	mov.l	%a0,(%a1,12.w)
	mov.l	&3,%d0
	mov.l	%d0,(%sp)
	mov.l	((S%35-16).w,%fp),-(%sp)
	mov.l	((S%35-16).w,%fp),-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	((S%35-8).w,%fp),%d0
	lsl.l	&4,%d0
	lea.l	([screen],%d0.l),%a0
	mov.l	(%a0,12.w),-(%sp)
	mov.l	((S%35-4).w,%fp),-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	&1,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	((S%35-8).w,%fp),%d0
	lsl.l	&4,%d0
	lea.l	([screen],%d0.l),%a0
	mov.l	(%a0,8.w),-(%sp)
	mov.l	((S%35-8).w,%fp),%d0
	lsl.l	&4,%d0
	lea.l	([screen],%d0.l),%a0
	mov.l	(%a0,4.w),-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	&0,%d0
	mov.l	%d0,-(%sp)
	mov.l	%d0,-(%sp)
	jsr	NewDevicePoint
	add.l	&8,%sp
	mov.l	4(%a0),-(%sp)
	mov.l	0(%a0),-(%sp)
	mov.l	((S%35-4).w,%fp),-(%sp)
	sub.l	%a0,%a0
	mov.l	%a0,-(%sp)
	jsr	BitBlt
	add.l	&32,%sp
	mov.l	&3,((S%35-114).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,56.b),((S%35-106).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,52.b),((S%35-102).w,%fp)
	mov.l	&3,((S%35-82).w,%fp)
	mov.l	((S%35-8).w,%fp),%d0
	lsl.l	&4,%d0
	lea.l	([screen],%d0.l),%a0
	mov.l	([12.w,%a0]),((S%35-118).w,%fp)
	mov.l	([(S%35-118).w,%fp]),((S%35-66).w,%fp)
	mov.l	&2317,((S%35-24).w,%fp)
	pea.l	((S%35-114).w,%fp)
	mov.l	((S%35-24).w,%fp),-(%sp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,8.b),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCreateGC
	add.l	&16,%sp
	mov.l	%a0,([(S%35-118).w,%fp],4.w)
	mov.l	((S%35-8).w,%fp),%d0
	lsl.l	&4,%d0
	lea.l	([screen],%d0.l),%a0
	mov.w	&1,([12.w,%a0],32.w)
	mov.l	((S%35-8).w,%fp),%d0
	lsl.l	&4,%d0
	lea.l	([screen],%d0.l),%a0
	mov.w	&1,([12.w,%a0],34.w)
	add.l	&1,((S%35-8).w,%fp)
L%676:
	mov.l	((S%35-8).w,%fp),%d0
	cmp.l	%d0,screen_size
	blt	L%%30
	mov.l	screen_size,%d0
	lsl.l	&4,%d0
	lea.l	([screen],%d0.l),%a0
	mov.l	((S%35-4).w,%fp),(%a0,12.w)
	mov.l	&3,((S%35-114).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,56.b),((S%35-106).w,%fp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,52.b),((S%35-102).w,%fp)
	mov.l	&3,((S%35-82).w,%fp)
	mov.l	([(S%35-4).w,%fp]),((S%35-118).w,%fp)
	mov.l	([(S%35-118).w,%fp]),((S%35-66).w,%fp)
	mov.l	&2317,((S%35-24).w,%fp)
	pea.l	((S%35-114).w,%fp)
	mov.l	((S%35-24).w,%fp),-(%sp)
	mov.l	SCREEN,%d0
	asl.l	&4,%d0
	mov.l	%d0,%d1
	asl.l	&2,%d0
	add.l	%d1,%d0
	mov.l	([dpy],140.w),%a0
	mov.l	(%a0,%d0.l,8.b),-(%sp)
	mov.l	dpy,-(%sp)
	jsr	XCreateGC
	add.l	&16,%sp
	mov.l	%a0,([(S%35-118).w,%fp],4.w)
	mov.l	screen_size,%d0
	lsl.l	&4,%d0
	lea.l	([screen],%d0.l),%a0
	mov.w	&1,([12.w,%a0],32.w)
	mov.l	screen_size,%d0
	lsl.l	&4,%d0
	lea.l	([screen],%d0.l),%a0
	mov.w	&1,([12.w,%a0],34.w)
	unlk	%fp
	rts
	global	HardUpdate
	set	S%36,0
	set	T%36,0
	set	F%36,-4
	set	FPO%36,4
	set	FPM%36,0x0000
	set	M%36,0x0000
SetClipHardware:
	link.l	%fp,&-4
	tst.l	(8,%fp)
	beq.b	L%679
	mov.l	(12,%fp),([8.w,%fp],28.w)
	beq.b	L%680
	mov.l	([8.w,%fp],28.w),%a0
	mov.w	&1,(%a0,34.w)
L%680:
L%679:
	unlk	%fp
	rts
	global	UpdateControl
	set	S%37,0
	set	T%37,0
	set	F%37,-4
	set	FPO%37,4
	set	FPM%37,0x0000
	set	M%37,0x0000
HardUpdate:
	link.l	%fp,&-4
	mov.l	&0,%d0
	mov.l	%d0,(%sp)
	mov.l	dpy,-(%sp)
	jsr	XFlush
	add.l	&4,%sp
	unlk	%fp
	rts
	global	ConvertToDevicePoint
	set	S%38,0
	set	T%38,0
	set	F%38,-4
	set	FPO%38,4
	set	FPM%38,0x0000
	set	M%38,0x0000
UpdateControl:
	link.l	%fp,&-4
	unlk	%fp
	rts
	comm	__StRet,8
	set	S%39,0
	set	T%39,0
	set	F%39,-12
	set	FPO%39,4
	set	FPM%39,0x0000
	set	M%39,0x0000
ConvertToDevicePoint:
	link.l	%fp,&-12
	fmov.l	(8,%fp),%fp0
	fmul.l	pixels_per_inch,%fp0
	fdiv.d	&0x4052000000000000,%fp0
	fintrz.x	%fp0,%fp0
	fmov.l	%fp0,((S%39-8).w,%fp)
	fmov.l	(12,%fp),%fp0
	fmul.l	pixels_per_inch,%fp0
	fdiv.d	&0x4052000000000000,%fp0
	fintrz.x	%fp0,%fp0
	fmov.l	%fp0,((S%39-4).w,%fp)
	lea.l	((S%39-8).w,%fp),%a0
	mov.l	&__StRet,%a1
	mov.l	(%a0)+,(%a1)+
	mov.l	(%a0),(%a1)
	mov.l	&__StRet,%a0
	mov.l	%a0,%d0
	unlk	%fp
	rts
